<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/metro.css" rel="stylesheet">
        <link href="css/metro-colors.css" rel="stylesheet">
        <link href="css/metro-responsive.css" rel="stylesheet">
        <link href="css/metro-rtl.css" rel="stylesheet">
        <link href="css/metro-schemes.css" rel="stylesheet">
        <link href="css/metro-icons.css" rel="stylesheet">
        <link href="css/bootstrap-table.css" rel="stylesheet">
        <link href="css/estilo.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/daterangepicker.css" rel="stylesheet">
        <meta name="description" content="Sistema de Reservas de Equipamentos, salas e laboratórios para a UNEMAT-BBG">
        <meta name="author" content="Cosme da Silva Lorim (estagiário do SPD da UNEMAT de Barra do Bugres)">
        <title>Reservas UNEMAT-BBG</title>
    </head>
    <body>

        <div class="app-bar">
            <a class="app-bar-element branding">Reservas UNEMAT</a>
        </div>
    <center><h1>Reservas UNEMAT-BBG</h1></center>
    <div class="container">
        <div class="grid">
            <div class="flex-grid">
                <div class="row">
                    <div class="cell colspan2">
                        <label class="block" for="datamanutencao">Buscar na data:</label>
                        <input type="text" name="datamanutencao" value="" />
                    </div>
                    <div class="cell colspan10">
                        <table id="tabelareservas">
                            <thead>
                                <tr>
                                    <th rowspan="2" data-field="descricao">Objeto</th>
                                    <th colspan="4">Matutino</th>
                                    <th rowspan="2" data-field="almoco" data-formatter="formatadorCelula">Almoço</th>
                                    <th colspan="4">Vespertino</th>
                                    <th rowspan="2" data-field="janta" data-formatter="formatadorCelula">Janta</th>
                                    <th colspan="4" data-formatter="formatadorCelula">Noturno</th>
                                </tr>
                                <tr>
                                    <th data-field="mat_aula_1" data-formatter="formatadorCelula">1</th>
                                    <th data-field="mat_aula_2" data-formatter="formatadorCelula">2</th>
                                    <th data-field="mat_aula_3" data-formatter="formatadorCelula">3</th>
                                    <th data-field="mat_aula_4" data-formatter="formatadorCelula">4</th>

                                    <th data-field="vesp_aula_1" data-formatter="formatadorCelula">1</th>
                                    <th data-field="vesp_aula_2" data-formatter="formatadorCelula">2</th>
                                    <th data-field="vesp_aula_3" data-formatter="formatadorCelula">3</th>
                                    <th data-field="vesp_aula_4" data-formatter="formatadorCelula">4</th>

                                    <th data-field="not_aula_1" data-formatter="formatadorCelula">1</th>
                                    <th data-field="not_aula_2" data-formatter="formatadorCelula">2</th>
                                    <th data-field="not_aula_3" data-formatter="formatadorCelula">3</th>
                                    <th data-field="not_aula_4" data-formatter="formatadorCelula">4</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p class="copyright" style="vertical-align: bottom; text-align: center;">
        &copy; Desenvolvido por UNEMAT - Unemat-BBG Campus Universitário Renê Barbour<br>
        Endereço: R. A, s/n - COHAB São Raimundo, Barra do Bugres - MT, 78390-000
    </p>
</body>

<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/bootstrap-table.min.js"></script>
<script src="js/metro.js"></script>
<script src="js/bootstrap-table.min.js"></script>
<script src="js/moment.min.js"></script>
<script src="js/daterangepicker.js"></script>

<script>
    $('input[name="datamanutencao"]').daterangepicker({
        singleDatePicker: true,
        showDropdowns: true,
        "timePicker": false,
        "opens": "rigth",
        "drops": "down",
        "locale": {
            format: 'DD/MM/YYYY',
            "separator": " | até | ",
            "applyLabel": "Aplicar",
            "cancelLabel": "Cancelar",
            "fromLabel": "de",
            "toLabel": "para",
            "customRangeLabel": "Personalizado",
            "daysOfWeek": [
                "Dom",
                "Seg",
                "Ter",
                "Qua",
                "Qui",
                "Sex",
                "Sab"
            ],
            "monthNames": [
                "Janeiro",
                "Fevereiro",
                "Março",
                "Abril",
                "Maio",
                "junho",
                "Julho",
                "Agosto",
                "Setembro",
                "Outubro",
                "Novembro",
                "Dezembro"
            ],
            "firstDay": 1
        }
    },
            function (start, end, label) {
                var data = parseInt(moment(start).format('X'));
                $("#tabelareservas").bootstrapTable('refresh', {
                    url: "/reservas?data=" + data
                });
            }
    );

    $('#tabelareservas').bootstrapTable({
        url: "/reservas",
        pageSize: 20,
        pagination: false,
        pagelist: [10, 100, 250],
        sidePagination: 'server',
        onClickRow: function(row)
        {
            console.log(row);
        }
    });

    function formatadorCelula(val)
    {
        if (val)
        {
            return '<span class="mif-cross fg-red"></span>';
        }
        return '<span class="mif-checkmark fg-blue"></span>';
    }

    function utxToData(val) {
        var d = moment.unix(val);
        return moment(d).format('DD/MM/YYYY');
    }
</script>
</html>
